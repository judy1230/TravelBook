
<div class="home_bg mt-4 mb-5 p-5 row">
	<form action="/users/{{user.id}}/dailyTour/{{tour.id}}?_method=PUT" method="POST" class="form-input col-6"
		style="width:50%;">
	<div class="tour-form ml-5">
		<input type="text" name="title" value="{{title}}"class="text-center" style="width: 30%; margin-right:25px;"	placeholder="Today's Tour">
		<ul class="moveable timeline" id="items-list">
			<li class="input-append row">
				<input type="text" name="origin" value="{{origin}}"class="form-style text-center" style="width: 30%; margin-right:25px;"placeholder={{origin}}>
				<input type="text" name="date" class="form-style datepicker text-center" style="width:35%; " value="{{date}}" placeholder="日期: {{date}}">
				<input type="text" name="startHourInit" class="time form-style text-center" style="color:mediumblue; font-size:16px;width:10%; margin-left:20px;" value="{{startHourInit}} " placeholder="{{startHourInit}}">
				<span class="text-center"style="width:20px;"> : </span>
				<input type="text" name="startMinInit" class="time form-style text-center"
					style="color:mediumblue; font-size:16px;width:10%; " value=" {{startMinInit}}"
					placeholder="{{startMinInit}}">
			</li>

			{{#each tourComponents}}
			<li>
				<div class="card mb-3" style="max-width: 500px;">
					<div class="row no-gutters">
						<div class="col-md-6">
							<img src="{{this.image}}" class="card-img" height="160px" width="160px"alt="">
						</div>
						<div class="col-md-6">
							<form action="/users/{{this.id}}/{{this.category}}/component?_method=DELETE" method="POST"><button type="submit"
									class="btn close btn-sm"><span aria-hidden="true">×</span></button>
							</form>
							<div class="card-body">
								<h6 class="card-title" href="#">{{this.destination}} {{this.end}}</h6>
								<label>停留時間:</label>
								  <form action="/users/{{this.id}}/{{this.category}}/component?_method=PUT" method="POST">
											<input type="text" name="stayTime" value=" {{this.stayTime}}" class="form-style text-center"
												style="color:purple; width:25%;"><span>mins</span>
												<button type="submit" class="btn btn-outline-light btn-sm" style="color:yellowgreen;">修改時間</button>
									</form>
								<p class="card-text" style="font-size: 14px;"><span><i class="fas fa-car" style="color:deepskyblue"></i></span> {{this.duration}}</p>
							</div>
						</div>
					</div>
				</div>
			</li>
			{{/each}}
			<li class="row">
				<p class="form-style text-center mr-3 font-weight-bold">{{endLocation}}</p>
				<span class="form-style text-center mr-3">{{endTime}}</span>
				<p><span><i class="fas fa-car" style="color:deepskyblue"></i></span>: {{endDuration}}</p>
			</li>
		</ul>
		<div class="form-submit out-line-close">
			<input type="submit" name="submit" value="重新計算">
		</div>
	</div>
	</form>
	<!-- 地圖放置處 -->

	<div class="col-4 ml-5 mt-5 text-center sticky-top">
		<div class=" sticky-top" id="map">
			<iframe width="450" height="300" frameborder="0" style="border:0"
				src="https://www.google.com/maps/embed/v1/directions?key={{API_KEY}}&origin={{origin}}&destination={{destination}}">>
			</iframe>
		</div>
	</div>
	<form action="/users/{{user.id}}/tour" method="POST" class="col-1" style="width:20%;">
			<input type="hidden" name="title" value="{{title}}">
			<input type="hidden" name="origin" value="{{origin}}">
			<input type="hidden" name="startHourInit" value="{{startHourInit}}">
			<input type="hidden" name="startMinInit" value="{{startMinInit}}">
			<input type="hidden" name="date" value="{{date}}">
			<button type="submit"class="btn close btn-sm "><i class="far fa-bookmark" style="color:green"></i></button>
			</form>
	<a href="/users/{{user.id}}/tourEdit">tourEdit</a>


</div>


<script>
	$('.datepicker').datepicker({
		clearBtn: true,
		orientation: "auto right",
		forceParse: false,
		daysOfWeekHighlighted: "0,6",
		todayHighlight: true
	})

</script>

{{!-- <script>


	let items = document.querySelectorAll('#items-list > li')

	items.forEach(item => {
		$(item).prop('draggable', true)
		item.addEventListener('dragstart', dragStart)
		item.addEventListener('drop', dropped)
		item.addEventListener('dragenter', cancelDefault)
		item.addEventListener('dragover', cancelDefault)
	})

	function dragStart(e) {
		var index = $(e.target).index()
		e.dataTransfer.setData('text/plain', index)
	}

	function dropped(e) {
		cancelDefault(e)

		// get new and old index
		let oldIndex = e.dataTransfer.getData('text/plain')
		let target = $(e.target)
		let newIndex = target.index()

		// remove dropped items at old place
		let dropped = $(this).parent().children().eq(oldIndex).remove()

		// insert the dropped items at new place
		if (newIndex < oldIndex) {
			target.before(dropped)
       ajax()
		} else {
			target.after(dropped)
		}
	}

	function cancelDefault(e) {
		e.preventDefault()
		e.stopPropagation()
		return false
	}

</script> --}}

<style>
.home_bg {
  background-image: url(https://png.pngtree.com/thumb_back/fh260/back_pic/05/10/85/72598e504024b48.jpg);
  background-size: cover;
  background-position: center;
  background-repeat: no-repeat;
  width: 100%;
  height: 100%;
  }

	ul.timeline {
		list-style-type: none;
		position: relative;
	}

	ul.timeline:before {
		content: ' ';
		background: #d4d9df;
		display: inline-block;
		position: absolute;
		left: 29px;
		width: 2px;
		height: 100%;
		z-index: 200;
	}

	ul.timeline>li {
		margin: 20px 0;
		padding-left: 20px;
	}

	ul.timeline>li:before {
		content: ' ';
		background: white;
		display: inline-block;
		position: absolute;
		border-radius: 50%;
		border: 3px solid #22c0e8;
		left: 20px;
		width: 20px;
		height: 20px;
		z-index: 400;
	}

	[draggable="true"] {
		user-select: none;
		-moz-user-select: none;
		-webkit-user-select: none;
		-ms-user-select: none;
	}



	ul.moveable {
		list-style: none;
		margin: 0px;

		li {
			list-style-image: none;
			margin: 10px;
			border: 1px solid #ccc;
			padding: 4px;
			border-radius: 4px;
			color: #666;
			cursor: move;

			/* &:hover {
			background-color: #eee;
		} */
		}
	}
	.tour-form input.form-style {
  width: 100%;
  border: none;
  border-bottom: 1px solid #333;
  text-transform: capitalize;
  padding-bottom: 5px;
  margin-bottom: 10px;
  outline: none;
}
 .form-submit {
  text-align: left;
  padding: 0 15px;
}

 .form-submit input {
  font-size: 16px;
  text-transform: capitalize;
  background-color: transparent;
  border: 1px solid #000;
  border-radius: 12px;
  padding: 15px 60px;
  margin-top: 16px;
  margin-bottom: 14px;
  cursor: pointer;
  -webkit-transition: .4s linear;
  -moz-transition: .4s linear;
  -ms-transition: .4s linear;
  -o-transition: .4s linear
  transition: .4s linear;
	float:right;
}

 .form-submit input:hover {
  background-color: #000;
  color: #fff;
}


</style>
